{"ast":null,"code":"import axios from 'axios';\nimport AlertComponent from '@/components/AlertComponent.vue';\nimport CardFormComponent from '@/components/cards/CardFormComponent.vue';\nimport ButtonComponent from '@/components/ButtonComponent.vue';\nexport default {\n  data() {\n    return {\n      alert: 'Такого пользователя не существует!',\n      link_signup: '/signup',\n      link_reset_password: '/password-reset',\n      username: '',\n      password: ''\n    };\n  },\n\n  components: {\n    CardFormComponent,\n    ButtonComponent,\n    AlertComponent\n  },\n  methods: {\n    loginUser() {\n      if (String(this.username).length > 0 && String(this.password).length > 0) {\n        axios.post('http://localhost:5000/api/user/auth', {\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          email: this.username,\n          password: this.password\n        }).then(function (response) {\n          document.cookie = 'user=Bearer ' + response.data.message.access_token; // Сохрнить токен и перенаправить на страницу профиля\n        }).catch(function (error) {\n          if (error.response.status === 500) {\n            self.alert = 'Такого пользователя не существует!'; // Активация всплывающего сообщения\n\n            document.getElementById('toast').style.opacity = 1;\n          }\n        });\n      } else {\n        this.alert = 'Заполните все поля!'; // Активация всплывающего сообщения\n\n        document.getElementById('toast').style.opacity = 1;\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAwCA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,cAAP,MAA2B,iCAA3B;AACA,OAAOC,iBAAP,MAA8B,0CAA9B;AACA,OAAOC,eAAP,MAA4B,kCAA5B;AAEA,eAAe;EACbC,IAAG,GAAK;IACN,OAAO;MACLC,KAAK,EAAE,oCADF;MAELC,WAAW,EAAE,SAFR;MAGLC,mBAAmB,EAAE,iBAHhB;MAILC,QAAQ,EAAE,EAJL;MAKLC,QAAQ,EAAE;IALL,CAAP;EAOD,CATY;;EAUbC,UAAU,EAAE;IACVR,iBADU;IAEVC,eAFU;IAGVF;EAHU,CAVC;EAebU,OAAO,EAAE;IACPC,SAAQ,GAAK;MACX,IAAIC,MAAM,CAAC,KAAKL,QAAN,CAAN,CAAsBM,MAAtB,GAA+B,CAA/B,IAAoCD,MAAM,CAAC,KAAKJ,QAAN,CAAN,CAAsBK,MAAtB,GAA+B,CAAvE,EAA0E;QACxEd,KAAK,CAACe,IAAN,CAAW,qCAAX,EACE;UACEC,OAAO,EAAE;YACP,gBAAgB;UADT,CADX;UAIEC,KAAK,EAAE,KAAKT,QAJd;UAKEC,QAAQ,EAAE,KAAKA;QALjB,CADF,EASGS,IATH,CASQ,UAAUC,QAAV,EAAoB;UACxBC,QAAQ,CAACC,MAAT,GAAkB,iBAAiBF,QAAQ,CAACf,IAAT,CAAckB,OAAd,CAAsBC,YAAzD,CADwB,CAExB;QACD,CAZH,EAaGC,KAbH,CAaS,UAAUC,KAAV,EAAiB;UACtB,IAAIA,KAAK,CAACN,QAAN,CAAeO,MAAf,KAA0B,GAA9B,EAAmC;YACjCC,IAAI,CAACtB,KAAL,GAAa,oCAAb,CADiC,CAEjC;;YACAe,QAAQ,CAACQ,cAAT,CAAwB,OAAxB,EAAiCC,KAAjC,CAAuCC,OAAvC,GAAiD,CAAjD;UACF;QACD,CAnBH;MAoBF,CArBA,MAqBO;QACL,KAAKzB,KAAL,GAAa,qBAAb,CADK,CAEL;;QACAe,QAAQ,CAACQ,cAAT,CAAwB,OAAxB,EAAiCC,KAAjC,CAAuCC,OAAvC,GAAiD,CAAjD;MACF;IACF;;EA5BO;AAfI,CAAf","names":["axios","AlertComponent","CardFormComponent","ButtonComponent","data","alert","link_signup","link_reset_password","username","password","components","methods","loginUser","String","length","post","headers","email","then","response","document","cookie","message","access_token","catch","error","status","self","getElementById","style","opacity"],"sourceRoot":"","sources":["/home/vuacheslavmironov/PAD/web/src/views/SignInView.vue"],"sourcesContent":["<template>\n  <main class=\"container_fluid\">\n    <!-- Компонент сообщения -->\n    <AlertComponent css_class=\"toast align-items-cente right\" v-bind:mess=\"this.alert\" />\n    <!-- END -->\n    <div class=\"container\">\n      <CardFormComponent>\n        <div class=\"container mb-3 text-center\">\n          <h3>Войти</h3>\n        </div>\n        <form>\n          <div class=\"mb-3\">\n            <label class=\"form-label\">\n              <b>Введите E-mail</b>\n            </label>\n            <input type=\"email\" id=\"user_email\" v-model=\"username\" class=\"form-control\">\n          </div>\n          <div class=\"mb-3\">\n            <label class=\"form-label\">\n              <b>Введите пароль</b>\n            </label>\n            <input type=\"password\" id=\"user_password\" v-model=\"password\" class=\"form-control\">\n          </div>\n          <div class=\"row\">\n            <div class=\"col-6\">\n              <p>Нет аккаунта? <a v-bind:href=\"this.link_signup\">Регистрация</a></p>\n              <a v-bind:href=\"this.link_reset_password\">Забыли пароль?</a>\n            </div>\n            <div class=\"col-6\">\n              <!-- Компонент кнопки -->\n              <ButtonComponent text=\"Войти\" v-on:click=\"this.loginUser()\" css_class=\"btn mt-2 right\"/>\n            </div>\n          </div>\n        </form>\n      </CardFormComponent>\n    </div>\n  </main>\n</template>\n\n<script>\nimport axios from 'axios'\nimport AlertComponent from '@/components/AlertComponent.vue'\nimport CardFormComponent from '@/components/cards/CardFormComponent.vue'\nimport ButtonComponent from '@/components/ButtonComponent.vue'\n\nexport default {\n  data () {\n    return {\n      alert: 'Такого пользователя не существует!',\n      link_signup: '/signup',\n      link_reset_password: '/password-reset',\n      username: '',\n      password: ''\n    }\n  },\n  components: {\n    CardFormComponent,\n    ButtonComponent,\n    AlertComponent\n  },\n  methods: {\n    loginUser () {\n      if (String(this.username).length > 0 && String(this.password).length > 0) {\n        axios.post('http://localhost:5000/api/user/auth',\n          {\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            email: this.username,\n            password: this.password\n          }\n        )\n          .then(function (response) {\n            document.cookie = 'user=Bearer ' + response.data.message.access_token\n            // Сохрнить токен и перенаправить на страницу профиля\n          })\n          .catch(function (error) {\n            if (error.response.status === 500) {\n              self.alert = 'Такого пользователя не существует!'\n              // Активация всплывающего сообщения\n              document.getElementById('toast').style.opacity = 1\n            }\n          })\n      } else {\n        this.alert = 'Заполните все поля!'\n        // Активация всплывающего сообщения\n        document.getElementById('toast').style.opacity = 1\n      }\n    }\n  }\n}\n</script>\n"]},"metadata":{},"sourceType":"module"}