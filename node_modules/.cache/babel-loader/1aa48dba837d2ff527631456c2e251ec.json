{"ast":null,"code":"import axios from 'axios';\nimport AlertComponent from '@/components/AlertComponent.vue';\nimport CardFormComponent from '@/components/cards/CardFormComponent.vue';\nimport LoaderComponent from '@/components/LoaderComponent.vue';\nimport ButtonComponent from '@/components/ButtonComponent.vue';\nexport default {\n  data() {\n    return {\n      user_info: null,\n      users: null,\n      alert: '',\n      organization_id: null,\n      first_name: null,\n      last_name: null,\n      role: null,\n      email: null,\n      first_and_last_name: null,\n      update_user_id: null,\n      update_first_name: null,\n      update_last_name: null,\n      update_role: null,\n      update_email: null,\n      lesson: null,\n      lesson_list: null\n    };\n  },\n\n  props: {\n    is_auth: Number\n  },\n  components: {\n    CardFormComponent,\n    LoaderComponent,\n    ButtonComponent,\n    AlertComponent\n  },\n  methods: {\n    user: function () {\n      console.log('error');\n\n      if (this.is_auth > 0) {\n        axios.get('http://localhost:5000/api/user/user-info?access_token=' + document.cookie.split(';')[1].split('=')[1].split(' ')[1], {\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        }).then(response => {\n          this.user_info = response.data[0].message;\n        }).catch(function (error) {\n          console.log(error);\n        });\n      }\n    },\n\n    create_user() {\n      // Генерация пароля\n      let generate = '';\n      const possible = 'abcdefghijklmnopqrstuvwxyz';\n\n      for (let i = 0; i < 5; i++) {\n        generate += possible.charAt(Math.floor(Math.random() * possible.length));\n      } // END\n      // Активация лоадера\n\n\n      document.getElementById('loader-bg').style.display = 'block'; // END\n      // Отправка данных\n\n      axios.post('http://localhost:5000/api/user/create-user', {\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n          'Access-Control-Allow-Headers': 'Origin, Content-Type, X-Auth-Token, Authorization, Accept,charset,boundary,Content-Length'\n        },\n        organization_name: this.user_info.organization_id,\n        add_personal: true,\n        role: this.role,\n        first_name: this.first_name,\n        last_name: this.last_name,\n        username: this.email,\n        email: this.email,\n        password: 'user' + generate\n      }).then(response => {\n        if (response.data.response === false) {\n          this.alert = response.data.message; // Активация всплывающего сообщения\n\n          document.getElementById('toast').style.opacity = 1; // Деактивация лоадера\n\n          document.getElementById('loader-bg').style.display = 'none';\n        } else {\n          // Очистка полей\n          this.first_name = '';\n          this.last_name = '';\n          this.role = '';\n          this.email = ''; // Деактивация лоадера\n\n          document.getElementById('loader-bg').style.display = 'none';\n          this.message = 'Проверьте почту, туда выслано сообщение для активации аккаунта.';\n        }\n      }).catch(function (error) {\n        console.log(error.response);\n\n        if (error.response) {\n          console.log(error); // Деактивация лоадера\n\n          document.getElementById('loader-bg').style.display = 'none';\n          self.alert = 'Данная организация уже существует!'; // Активация всплывающего сообщения\n\n          document.getElementById('toast').style.opacity = 1;\n        }\n      }); // END\n    },\n\n    all_show_user(role) {\n      // Активация лоадера\n      document.getElementById('loader-bg').style.display = 'block'; // Запрос на выборку данных юзера по ролям\n\n      axios.get('http://localhost:5000/api/user/all-user?organization_id=' + this.user_info.organization_id + '&&role=' + role, {\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      }).then(response => {\n        this.users = response.data[0].message.users;\n        document.getElementById('personal-info').classList.remove('d-none');\n        document.getElementById('personal-info').classList.add('d-block'); // Деактивация лоадера\n\n        document.getElementById('loader-bg').style.display = 'none';\n      }).catch(function (error) {\n        if (error.error) {\n          // Деактивация лоадера\n          document.getElementById('loader-bg').style.display = 'none';\n          self.alert = 'Ошибка получения данных!'; // Активация всплывающего сообщения\n\n          document.getElementById('toast').style.opacity = 1;\n        }\n      }); // END\n    },\n\n    user_change() {\n      this.update_user_id = this.users[this.first_and_last_name].user_id;\n      this.update_first_name = this.users[this.first_and_last_name].first_name;\n      this.update_last_name = this.users[this.first_and_last_name].last_name;\n      this.update_role = this.users[this.first_and_last_name].role;\n      this.update_email = this.users[this.first_and_last_name].email;\n    },\n\n    update_user() {\n      // Активация лоадера\n      document.getElementById('loader-bg').style.display = 'block'; // Запрос на выборку данных юзера по ролям\n\n      axios.put('http://localhost:5000/api/user/update-user', {\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n          'Access-Control-Allow-Headers': 'Origin, Content-Type, X-Auth-Token, Authorization, Accept,charset,boundary,Content-Length'\n        },\n        user_id: this.update_user_id,\n        first_name: this.update_first_name,\n        last_name: this.update_last_name,\n        role: this.update_role,\n        email: this.update_email\n      }).then(response => {\n        // Деактивация лоадера\n        document.getElementById('loader-bg').style.display = 'none';\n        this.alert = 'Данные обновлены'; // Активация всплывающего сообщения\n\n        document.getElementById('toast').style.opacity = 1;\n      }).catch(function (error) {\n        if (error.error) {\n          // Деактивация лоадера\n          document.getElementById('loader-bg').style.display = 'none';\n          self.alert = 'Ошибка получения данных!'; // Активация всплывающего сообщения\n\n          document.getElementById('toast').style.opacity = 1;\n        }\n      }); // END\n    },\n\n    create_lesson() {\n      // Активация лоадера\n      document.getElementById('loader-bg').style.display = 'block'; // END\n      // Отправка данных\n\n      axios.post('http://localhost:5000/api/lesson/create-lesson', {\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n          'Access-Control-Allow-Headers': 'Origin, Content-Type, X-Auth-Token, Authorization, Accept,charset,boundary,Content-Length'\n        },\n        lesson: this.lesson,\n        organization_id: this.user_info.organization_id\n      }).then(response => {\n        // Деактивация лоадера\n        document.getElementById('loader-bg').style.display = 'none';\n        this.alert = 'Данные успешно сохранены!'; // Активация всплывающего сообщения\n\n        document.getElementById('toast').style.opacity = 1;\n      }).catch(error => {\n        if (error.response) {\n          // Деактивация лоадера\n          document.getElementById('loader-bg').style.display = 'none';\n          this.alert = 'Такой предмет уже добавлен!'; // Активация всплывающего сообщения\n\n          document.getElementById('toast').style.opacity = 1;\n        }\n      }); // END\n    },\n\n    lesson_show() {\n      if (this.user_info.organization_id) {\n        console.log('http://localhost:5000/api/lesson/lesson-all?organization_id=' + this.user_info);\n      }\n    }\n\n  },\n\n  beforeMount() {\n    this.user();\n    this.lesson_show();\n  }\n\n};","map":{"version":3,"mappings":"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","names":["axios","AlertComponent","CardFormComponent","LoaderComponent","ButtonComponent","data","user_info","users","alert","organization_id","first_name","last_name","role","email","first_and_last_name","update_user_id","update_first_name","update_last_name","update_role","update_email","lesson","lesson_list","props","is_auth","Number","components","methods","user","console","log","get","document","cookie","split","headers","then","response","message","catch","error","create_user","generate","possible","i","charAt","Math","floor","random","length","getElementById","style","display","post","organization_name","add_personal","username","password","opacity","self","all_show_user","classList","remove","add","user_change","user_id","update_user","put","create_lesson","lesson_show","beforeMount"],"sourceRoot":"","sources":["/home/vuacheslavmironov/PAD/web/src/views/JournalSettingsView.vue"],"sourcesContent":["<template>\n  <main class=\"container-fluid\">\n    <!-- Компонент загрузки -->\n    <LoaderComponent />\n    <!-- End -->\n    <!-- Сообщение о процессе -->\n    <AlertComponent css_class=\"toast align-items-cente right\" v-bind:mess=\"this.alert\" />\n    <!-- END -->\n    <div class=\" mx-auto\">\n      <div class=\"row\">\n        <!-- Секция левого меню -->\n        <section class=\"col-lg-5\">\n          <CardFormComponent id=\"settings-journal-menu\">\n            <p class=\"text-center\">\n              <strong>Настройки рабочего окружения</strong>\n            </p>\n            <hr>\n            <div class=\"mt-3\">\n              <a class=\"list_items\" role=\"button\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\">\n                  <path d=\"M21.546 11.646 19 9.101V5.5a.5.5 0 0 0-.5-.5h-3.601l-2.546-2.546a.5.5 0 0 0-.707 0L9.101 5H5.5a.5.5 0 0 0-.5.5v3.601l-2.546 2.546a.5.5 0 0 0 0 .707L5 14.899V18.5a.5.5 0 0 0 .5.5h3.601l2.546 2.546a.5.5 0 0 0 .707 0L14.899 19H18.5a.5.5 0 0 0 .5-.5v-3.601l2.546-2.546a.5.5 0 0 0 0-.707zM12 16a4 4 0 1 1 0-8 4 4 0 0 1 0 8z\"></path>\n                </svg>Общие настройки\n              </a>\n            </div>\n            <div class=\"mt-1\">\n              <a\n                class=\"list_items\"\n                data-bs-toggle=\"collapse\"\n                href=\"#staff\"\n                role=\"button\"\n                aria-expanded=\"false\"\n                aria-controls=\"collapseExample\"\n              >\n                <svg xmlns=\"http://www.w3.org/2000/svg\">\n                  <path d=\"M7.5 6.5C7.5 8.981 9.519 11 12 11s4.5-2.019 4.5-4.5S14.481 2 12 2 7.5 4.019 7.5 6.5zM20 21h1v-1c0-3.859-3.141-7-7-7h-4c-3.86 0-7 3.141-7 7v1h17z\"></path>\n                </svg>Персонал\n              </a>\n              <div class=\"collapse\" id=\"staff\">\n                <ul class=\"list-group\">\n                  <li class=\"list-group-item\">\n                    <a href=\"#user_add\">Добавить</a>\n                  </li>\n                  <li class=\"list-group-item\">\n                    <a href=\"#user_update\">Редактировать</a>\n                  </li>\n                </ul>\n              </div>\n            </div>\n            <div class=\"mt-1\">\n              <a\n                class=\"list_items\"\n                data-bs-toggle=\"collapse\"\n                href=\"#lesson\"\n                role=\"button\"\n                aria-expanded=\"false\"\n                aria-controls=\"collapseExample\"\n              >\n                <svg xmlns=\"http://www.w3.org/2000/svg\">\n                  <path d=\"M20 3H4c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2zm-1 4v2h-5V7h5zm-5 4h5v2h-5v-2zM4 19V5h7v14H4z\"></path>\n                </svg>Предметы\n              </a>\n              <div class=\"collapse\" id=\"lesson\">\n                <ul class=\"list-group\">\n                  <li class=\"list-group-item\">\n                    <a href=\"#add_lesson\">Добавить</a>\n                  </li>\n                  <li class=\"list-group-item\">\n                    <a href=\"#\">Редактировать</a>\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </CardFormComponent>\n        </section>\n        <!-- Секция контента -->\n        <section class=\"col-lg-7 w-50\">\n          <h4>\n            <b>Настройки</b>\n          </h4>\n          <div class=\"mt-5\">\n            <div class=\"mb-5\">\n              <h5>Общие настройки</h5>\n              <br>\n              <div class=\"row\"><!-- Пока ток заглушка --></div>\n            </div>\n            <!-- Настройка персонала -->\n            <div class=\"mt-10\">\n              <div id=\"user_add\"><!-- Якорь на создание юзера --></div>\n              <h5>Регистрация персонала</h5>\n              <br>\n              <div class=\"row\">\n                <div class=\"mb-3 col-6\">\n                  <label class=\"form-label\">\n                    <b>Ваше имя</b>\n                  </label>\n                  <input type=\"text\" id=\"user_name\" v-model=\"first_name\" class=\"form-control\">\n                </div>\n                <div class=\"mb-3 col-6\">\n                  <label class=\"form-label\">\n                    <b>Ваша фамилия</b>\n                  </label>\n                  <input type=\"text\" id=\"user_surname\" v-model=\"last_name\" class=\"form-control\">\n                </div>\n              </div>\n              <div class=\"mb-3\">\n                <label class=\"form-label\">\n                  <b>Должность</b>\n                </label>\n                <select class=\"form-select\" v-model=\"role\" aria-label=\"Default select example\">\n                  <option value=\"Администратор\" selected>Администратор</option>\n                  <option value=\"Преподаватель\">Преподаватель</option>\n                </select>\n              </div>\n              <div class=\"mb-3\">\n                <label class=\"form-label\">\n                  <b>Электронная почта</b>\n                </label>\n                <input type=\"email\" id=\"user_email\" v-model=\"email\" class=\"form-control\">\n              </div>\n              <!-- Компонент кнопки -->\n              <ButtonComponent text=\"Сохранить\" v-on:click=\"this.create_user()\" css_class=\"btn mt-2 right\"/>\n              <!-- END -->\n            </div>\n            <div class=\"mt-10\">\n              <div id=\"user_update\"><!-- Якорь на обновление юзера --></div>\n              <h5>Редактирование персонала</h5>\n              <br>\n              <p>Выберите должность</p>\n              <div class=\"form-check\">\n                <input\n                  class=\"form-check-input\"\n                  v-on:click=\"all_show_user('Администратор')\"\n                  type=\"radio\"\n                  name=\"flexRadioDefault\"\n                  id=\"admin\"\n                >\n                <label class=\"form-check-label\" for=\"admin\">\n                  Администратор\n                </label>\n              </div>\n              <div class=\"form-check\">\n                <input\n                  class=\"form-check-input\"\n                  v-on:click=\"all_show_user('Преподаватель')\"\n                  type=\"radio\"\n                  name=\"flexRadioDefault\"\n                  id=\"teacher\"\n                >\n                <label class=\"form-check-label\" for=\"teacher\">\n                  Преподаватель\n                </label>\n              </div>\n              <section id=\"personal-info\" class=\"d-none\">\n                <div class=\"mb-3\">\n                  <label class=\"form-label\">\n                    <b id=\"select-text-personal\"></b>\n                  </label>\n                  <select\n                    v-on:change=\"user_change()\"\n                    class=\"form-select\"\n                    v-model=\"first_and_last_name\"\n                    aria-label=\"Default select example\"\n                  >\n                    <option\n                      v-for=\"(user, index) in users\"\n                      v-bind:key=\"user\"\n                      v-bind:value=\"index\"\n                    >\n                      {{ user.last_name }} {{ user.first_name }}\n                    </option>\n                  </select>\n                </div>\n                <div class=\"row\">\n                  <div class=\"mb-3 col-6\">\n                    <label class=\"form-label\">\n                      <b>Ваше имя</b>\n                    </label>\n                    <input type=\"text\" id=\"user_name\" v-model=\"update_first_name\" class=\"form-control\">\n                  </div>\n                  <div class=\"mb-3 col-6\">\n                    <label class=\"form-label\">\n                      <b>Ваша фамилия</b>\n                    </label>\n                    <input type=\"text\" id=\"user_surname\" v-model=\"update_last_name\" class=\"form-control\">\n                  </div>\n                </div>\n                <input hidden v-model=\"update_user_id\">\n                <div class=\"mb-3\">\n                  <label class=\"form-label\">\n                    <b>Должность</b>\n                  </label>\n                  <select class=\"form-select\" v-model=\"update_role\" aria-label=\"Default select example\">\n                    <option value=\"Администратор\" selected>Администратор</option>\n                    <option value=\"Преподаватель\">Преподаватель</option>\n                  </select>\n                </div>\n                <div class=\"mb-3\">\n                  <label class=\"form-label\">\n                    <b>Электронная почта</b>\n                  </label>\n                  <input type=\"email\" id=\"user_email\" v-model=\"update_email\" class=\"form-control\">\n                </div>\n                <!-- Компонент кнопки -->\n                <ButtonComponent text=\"Обновить данные\" v-on:click=\"this.update_user()\" css_class=\"btn mt-2 right\"/>\n                <!-- END -->\n              </section>\n            </div>\n            <!-- Настройка предметов -->\n            <div class=\"mt-10\">\n              <div id=\"add_lesson\"><!-- Якорь на обновление юзера --></div>\n              <h5>Добавить предмет</h5>\n              <br>\n              <div class=\"mb-3\">\n                <label class=\"form-label\">\n                  <b>Наименование предмета</b>\n                </label>\n                <input type=\"text\" v-model=\"lesson\" class=\"form-control\">\n              </div>\n              <!-- Компонент кнопки -->\n              <ButtonComponent text=\"Добавить\" v-on:click=\"this.create_lesson()\" css_class=\"btn mt-2 right\"/>\n              <!-- END -->\n            </div>\n            <div class=\"mb-5\"></div>\n          </div>\n        </section>\n      </div>\n    </div>\n  </main>\n</template>\n\n<script>\nimport axios from 'axios'\nimport AlertComponent from '@/components/AlertComponent.vue'\nimport CardFormComponent from '@/components/cards/CardFormComponent.vue'\nimport LoaderComponent from '@/components/LoaderComponent.vue'\nimport ButtonComponent from '@/components/ButtonComponent.vue'\n\nexport default {\n  data () {\n    return {\n      user_info: null,\n      users: null,\n      alert: '',\n      organization_id: null,\n      first_name: null,\n      last_name: null,\n      role: null,\n      email: null,\n      first_and_last_name: null,\n      update_user_id: null,\n      update_first_name: null,\n      update_last_name: null,\n      update_role: null,\n      update_email: null,\n      lesson: null,\n      lesson_list: null\n    }\n  },\n  props: {\n    is_auth: Number\n  },\n  components: {\n    CardFormComponent,\n    LoaderComponent,\n    ButtonComponent,\n    AlertComponent\n  },\n  methods: {\n    user: function () {\n      console.log('error')\n      if (this.is_auth > 0) {\n        axios.get('http://localhost:5000/api/user/user-info?access_token=' + document.cookie.split(';')[1].split('=')[1].split(' ')[1],\n          {\n            headers: {\n              'Content-Type': 'application/json'\n            }\n          }\n        )\n          .then((response) => {\n            this.user_info = response.data[0].message\n          })\n          .catch(function (error) {\n            console.log(error)\n          })\n      }\n    },\n    create_user () {\n      // Генерация пароля\n      let generate = ''\n      const possible = 'abcdefghijklmnopqrstuvwxyz'\n      for (let i = 0; i < 5; i++) {\n        generate += possible.charAt(Math.floor(Math.random() * possible.length))\n      }\n      // END\n      // Активация лоадера\n      document.getElementById('loader-bg').style.display = 'block'\n      // END\n      // Отправка данных\n      axios.post('http://localhost:5000/api/user/create-user',\n        {\n          headers: {\n            'Content-Type': 'application/json',\n            'Access-Control-Allow-Origin': '*',\n            'Access-Control-Allow-Headers': 'Origin, Content-Type, X-Auth-Token, Authorization, Accept,charset,boundary,Content-Length'\n          },\n          organization_name: this.user_info.organization_id,\n          add_personal: true,\n          role: this.role,\n          first_name: this.first_name,\n          last_name: this.last_name,\n          username: this.email,\n          email: this.email,\n          password: 'user' + generate\n        }\n      )\n        .then((response) => {\n          if (response.data.response === false) {\n            this.alert = response.data.message\n            // Активация всплывающего сообщения\n            document.getElementById('toast').style.opacity = 1\n            // Деактивация лоадера\n            document.getElementById('loader-bg').style.display = 'none'\n          } else {\n            // Очистка полей\n            this.first_name = ''\n            this.last_name = ''\n            this.role = ''\n            this.email = ''\n            // Деактивация лоадера\n            document.getElementById('loader-bg').style.display = 'none'\n            this.message = 'Проверьте почту, туда выслано сообщение для активации аккаунта.'\n          }\n        })\n        .catch(function (error) {\n          console.log(error.response)\n          if (error.response) {\n            console.log(error)\n            // Деактивация лоадера\n            document.getElementById('loader-bg').style.display = 'none'\n            self.alert = 'Данная организация уже существует!'\n            // Активация всплывающего сообщения\n            document.getElementById('toast').style.opacity = 1\n          }\n        })\n      // END\n    },\n    all_show_user (role) {\n      // Активация лоадера\n      document.getElementById('loader-bg').style.display = 'block'\n      // Запрос на выборку данных юзера по ролям\n      axios.get('http://localhost:5000/api/user/all-user?organization_id=' + this.user_info.organization_id + '&&role=' + role,\n        {\n          headers: {\n            'Content-Type': 'application/json',\n            'Access-Control-Allow-Origin': '*'\n          }\n        }\n      )\n        .then((response) => {\n          this.users = response.data[0].message.users\n          document.getElementById('personal-info').classList.remove('d-none')\n          document.getElementById('personal-info').classList.add('d-block')\n          // Деактивация лоадера\n          document.getElementById('loader-bg').style.display = 'none'\n        })\n        .catch(function (error) {\n          if (error.error) {\n            // Деактивация лоадера\n            document.getElementById('loader-bg').style.display = 'none'\n            self.alert = 'Ошибка получения данных!'\n            // Активация всплывающего сообщения\n            document.getElementById('toast').style.opacity = 1\n          }\n        })\n      // END\n    },\n    user_change () {\n      this.update_user_id = this.users[this.first_and_last_name].user_id\n      this.update_first_name = this.users[this.first_and_last_name].first_name\n      this.update_last_name = this.users[this.first_and_last_name].last_name\n      this.update_role = this.users[this.first_and_last_name].role\n      this.update_email = this.users[this.first_and_last_name].email\n    },\n    update_user () {\n      // Активация лоадера\n      document.getElementById('loader-bg').style.display = 'block'\n      // Запрос на выборку данных юзера по ролям\n      axios.put('http://localhost:5000/api/user/update-user',\n        {\n          headers: {\n            'Content-Type': 'application/json',\n            'Access-Control-Allow-Origin': '*',\n            'Access-Control-Allow-Headers': 'Origin, Content-Type, X-Auth-Token, Authorization, Accept,charset,boundary,Content-Length'\n          },\n          user_id: this.update_user_id,\n          first_name: this.update_first_name,\n          last_name: this.update_last_name,\n          role: this.update_role,\n          email: this.update_email\n        }\n      )\n        .then((response) => {\n          // Деактивация лоадера\n          document.getElementById('loader-bg').style.display = 'none'\n          this.alert = 'Данные обновлены'\n          // Активация всплывающего сообщения\n          document.getElementById('toast').style.opacity = 1\n        })\n        .catch(function (error) {\n          if (error.error) {\n            // Деактивация лоадера\n            document.getElementById('loader-bg').style.display = 'none'\n            self.alert = 'Ошибка получения данных!'\n            // Активация всплывающего сообщения\n            document.getElementById('toast').style.opacity = 1\n          }\n        })\n      // END\n    },\n    create_lesson () {\n      // Активация лоадера\n      document.getElementById('loader-bg').style.display = 'block'\n      // END\n      // Отправка данных\n      axios.post('http://localhost:5000/api/lesson/create-lesson',\n        {\n          headers: {\n            'Content-Type': 'application/json',\n            'Access-Control-Allow-Origin': '*',\n            'Access-Control-Allow-Headers': 'Origin, Content-Type, X-Auth-Token, Authorization, Accept,charset,boundary,Content-Length'\n          },\n          lesson: this.lesson,\n          organization_id: this.user_info.organization_id\n        }\n      )\n        .then((response) => {\n          // Деактивация лоадера\n          document.getElementById('loader-bg').style.display = 'none'\n          this.alert = 'Данные успешно сохранены!'\n          // Активация всплывающего сообщения\n          document.getElementById('toast').style.opacity = 1\n        })\n        .catch((error) => {\n          if (error.response) {\n            // Деактивация лоадера\n            document.getElementById('loader-bg').style.display = 'none'\n            this.alert = 'Такой предмет уже добавлен!'\n            // Активация всплывающего сообщения\n            document.getElementById('toast').style.opacity = 1\n          }\n        })\n      // END\n    },\n    lesson_show () {\n      if (this.user_info.organization_id) {\n        console.log('http://localhost:5000/api/lesson/lesson-all?organization_id=' + this.user_info)\n      }\n    }\n  },\n  beforeMount () {\n    this.user()\n    this.lesson_show()\n  }\n}\n</script>\n"]},"metadata":{},"sourceType":"module"}