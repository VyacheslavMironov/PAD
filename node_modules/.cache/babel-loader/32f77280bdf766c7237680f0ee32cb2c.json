{"ast":null,"code":"import axios from 'axios';\nimport AlertComponent from '@/components/AlertComponent.vue';\nimport CardFormComponent from '@/components/cards/CardFormComponent.vue';\nimport LoaderComponent from '@/components/LoaderComponent.vue';\nimport ButtonComponent from '@/components/ButtonComponent.vue';\nexport default {\n  data() {\n    return {\n      alert: '',\n      organization_name: null,\n      first_name: null,\n      last_name: null,\n      role: null,\n      email: null\n    };\n  },\n\n  props: {\n    user_info: Object\n  },\n  components: {\n    CardFormComponent,\n    LoaderComponent,\n    ButtonComponent,\n    AlertComponent\n  },\n  methods: {\n    user_organization() {\n      // this.user_info.organization_id\n      // Забор данных\n      axios.post('http://localhost:5000/api/organization/show-organization?id=' + this.user_info.organization_id, {\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(function (response) {\n        console.log(response);\n      }).catch(function (error) {\n        console.log(error);\n      }); // END\n    },\n\n    create_user() {\n      // Генерация пароля\n      let generate = '';\n      const possible = 'abcdefghijklmnopqrstuvwxyz';\n\n      for (let i = 0; i < 5; i++) {\n        generate += possible.charAt(Math.floor(Math.random() * possible.length));\n      } // END\n      // Активация лоадера\n\n\n      document.getElementById('loader-bg').style.display = 'block'; // END\n      // Отправка данных\n\n      axios.post('http://localhost:5000/api/user/create-user', {\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n          'Access-Control-Allow-Headers': 'Origin, Content-Type, X-Auth-Token, Authorization, Accept,charset,boundary,Content-Length'\n        },\n        organization_name: this.organization_name,\n        role: this.role,\n        first_name: this.first_name,\n        last_name: this.last_name,\n        username: this.email,\n        email: this.email,\n        password: 'user' + generate\n      }).then(function (response) {\n        console.log(response);\n\n        if (response.data.response === false) {\n          self.alert = response.data.message; // Активация всплывающего сообщения\n\n          document.getElementById('toast').style.opacity = 1; // Деактивация лоадера\n\n          document.getElementById('loader-bg').style.display = 'none'; // Уменьшение шага\n\n          document.getElementById('step').innerText = '2';\n        } else {\n          // Деактивация лоадера\n          document.getElementById('loader-bg').style.display = 'none';\n          self.message = 'Проверьте почту, туда выслано сообщение для активации аккаунта.';\n          document.getElementById('step_two').style.display = 'none';\n          document.getElementById('step_free').style.display = 'block';\n        }\n      }).catch(function (error) {\n        if (error.response.status === 500) {\n          console.log(error); // Деактивация лоадера\n\n          document.getElementById('loader-bg').style.display = 'none';\n          self.alert = 'Данная организация уже существует!'; // Активация всплывающего сообщения\n\n          document.getElementById('toast').style.opacity = 1;\n          document.getElementById('step_two').style.display = 'none';\n          document.getElementById('step_one').style.display = 'block'; // Уменьшение шага\n\n          document.getElementById('step').innerText = '1';\n        }\n      }); // END\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","AlertComponent","CardFormComponent","LoaderComponent","ButtonComponent","data","alert","organization_name","first_name","last_name","role","email","props","user_info","Object","components","methods","user_organization","post","organization_id","headers","then","response","console","log","catch","error","create_user","generate","possible","i","charAt","Math","floor","random","length","document","getElementById","style","display","username","password","self","message","opacity","innerText","status"],"sourceRoot":"","sources":["/home/vuacheslavmironov/PAD/web/src/views/JournalSettingsView.vue"],"sourcesContent":["<template>\n  <main class=\"container-fluid\">\n    <!-- Компонент загрузки -->\n    <LoaderComponent />\n    <!-- End -->\n    <!-- Сообщение о процессе -->\n    <AlertComponent css_class=\"toast align-items-cente right\" v-bind:mess=\"this.alert\" />\n    <!-- END -->\n    <div class=\" mx-auto\">\n      <div class=\"row\">\n        <!-- Секция левого меню -->\n        <section class=\"col-lg-5\">\n          <CardFormComponent>\n            <p class=\"text-center\">\n              <strong>Настройки рабочего окружения</strong>\n            </p>\n            <hr>\n            <div class=\"mt-3\">\n              <a class=\"list_items\" role=\"button\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\">\n                  <path d=\"M21.546 11.646 19 9.101V5.5a.5.5 0 0 0-.5-.5h-3.601l-2.546-2.546a.5.5 0 0 0-.707 0L9.101 5H5.5a.5.5 0 0 0-.5.5v3.601l-2.546 2.546a.5.5 0 0 0 0 .707L5 14.899V18.5a.5.5 0 0 0 .5.5h3.601l2.546 2.546a.5.5 0 0 0 .707 0L14.899 19H18.5a.5.5 0 0 0 .5-.5v-3.601l2.546-2.546a.5.5 0 0 0 0-.707zM12 16a4 4 0 1 1 0-8 4 4 0 0 1 0 8z\"></path>\n                </svg>Общие настройки\n              </a>\n            </div>\n            <div class=\"mt-1\">\n              <a class=\"list_items\" data-bs-toggle=\"collapse\" href=\"#staff\" role=\"button\" aria-expanded=\"false\" aria-controls=\"collapseExample\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\">\n                  <path d=\"M7.5 6.5C7.5 8.981 9.519 11 12 11s4.5-2.019 4.5-4.5S14.481 2 12 2 7.5 4.019 7.5 6.5zM20 21h1v-1c0-3.859-3.141-7-7-7h-4c-3.86 0-7 3.141-7 7v1h17z\"></path>\n                </svg>Персонал\n              </a>\n              <div class=\"collapse\" id=\"staff\">\n                <ul class=\"list-group\">\n                  <li class=\"list-group-item\">\n                    <a href=\"#user_add\">Добавить</a>\n                  </li>\n                  <li class=\"list-group-item\">\n                    <a href=\"#\">Редактировать</a>\n                  </li>\n                </ul>\n              </div>\n            </div>\n            <div class=\"mt-1\">\n              <a class=\"list_items\" data-bs-toggle=\"collapse\" href=\"#lesson\" role=\"button\" aria-expanded=\"false\" aria-controls=\"collapseExample\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\">\n                  <path d=\"M20 3H4c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2zm-1 4v2h-5V7h5zm-5 4h5v2h-5v-2zM4 19V5h7v14H4z\"></path>\n                </svg>Предметы\n              </a>\n              <div class=\"collapse\" id=\"lesson\">\n                <ul class=\"list-group\">\n                  <li class=\"list-group-item\">\n                    <a href=\"#\">Добавить</a>\n                  </li>\n                  <li class=\"list-group-item\">\n                    <a href=\"#\">Редактировать</a>\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </CardFormComponent>\n        </section>\n        <!-- Секция контента -->\n        <section class=\"col-lg-7 w-50\">\n          <h4>\n            <b>Настройки</b>\n          </h4>\n          <div class=\"mt-5\">\n            <div class=\"mb-5\"></div>\n            <!-- Настройка персонала -->\n            <div id=\"user_add\"><!-- Якорь на создание юзера --></div>\n            <div class=\"mb-5\">\n              <h5>Регистрация персонала</h5>\n              <br>\n              <div class=\"row\">\n                <div class=\"mb-3 col-6\">\n                  <label class=\"form-label\">\n                    <b>Ваше имя</b>\n                  </label>\n                  <input type=\"text\" id=\"user_name\" v-model=\"first_name\" class=\"form-control\">\n                </div>\n                <div class=\"mb-3 col-6\">\n                  <label class=\"form-label\">\n                    <b>Ваша фамилия</b>\n                  </label>\n                  <input type=\"text\" id=\"user_surname\" v-model=\"last_name\" class=\"form-control\">\n                </div>\n              </div>\n              <div class=\"mb-3\">\n                <label class=\"form-label\">\n                  <b>Должность</b>\n                </label>\n                <select class=\"form-select\" v-model=\"role\" aria-label=\"Default select example\">\n                  <option value=\"Администратор\" selected>Администратор</option>\n                  <option value=\"Преподаватель\">Преподаватель</option>\n                </select>\n              </div>\n              <div class=\"mb-3\">\n                <label class=\"form-label\">\n                  <b>Электронная почта</b>\n                </label>\n                <input type=\"email\" id=\"user_email\" v-model=\"email\" class=\"form-control\">\n              </div>\n              <!-- Компонент кнопки -->\n              <ButtonComponent text=\"Сохранить\" v-on:click=\"this.create_user()\" css_class=\"btn mt-2 right\"/>\n              <!-- END -->\n            </div>\n            <div class=\"mb-5\">\n              <h5>Редактирование персонала</h5>\n            </div>\n            <!-- Настройка предметов -->\n            <div class=\"mb-5\"></div>\n            <div class=\"mb-5\"></div>\n          </div>\n        </section>\n      </div>\n    </div>\n  </main>\n</template>\n\n<script>\nimport axios from 'axios'\nimport AlertComponent from '@/components/AlertComponent.vue'\nimport CardFormComponent from '@/components/cards/CardFormComponent.vue'\nimport LoaderComponent from '@/components/LoaderComponent.vue'\nimport ButtonComponent from '@/components/ButtonComponent.vue'\n\nexport default {\n  data () {\n    return {\n      alert: '',\n      organization_name: null,\n      first_name: null,\n      last_name: null,\n      role: null,\n      email: null\n    }\n  },\n  props: {\n    user_info: Object\n  },\n  components: {\n    CardFormComponent,\n    LoaderComponent,\n    ButtonComponent,\n    AlertComponent\n  },\n  methods: {\n    user_organization () {\n      // this.user_info.organization_id\n      // Забор данных\n      axios.post('http://localhost:5000/api/organization/show-organization?id=' + this.user_info.organization_id,\n        {\n          headers: {\n            'Content-Type': 'application/json',\n          }\n        }\n      )\n        .then(function (response) {\n          console.log(response)\n        })\n        .catch(function (error) {\n          console.log(error)\n        })\n      // END\n    },\n    create_user () {\n      // Генерация пароля\n      let generate = ''\n      const possible = 'abcdefghijklmnopqrstuvwxyz'\n      for (let i = 0; i < 5; i++) {\n        generate += possible.charAt(Math.floor(Math.random() * possible.length))\n      }\n      // END\n      // Активация лоадера\n      document.getElementById('loader-bg').style.display = 'block'\n      // END\n      // Отправка данных\n      axios.post('http://localhost:5000/api/user/create-user',\n        {\n          headers: {\n            'Content-Type': 'application/json',\n            'Access-Control-Allow-Origin': '*',\n            'Access-Control-Allow-Headers': 'Origin, Content-Type, X-Auth-Token, Authorization, Accept,charset,boundary,Content-Length'\n          },\n          organization_name: this.organization_name,\n          role: this.role,\n          first_name: this.first_name,\n          last_name: this.last_name,\n          username: this.email,\n          email: this.email,\n          password: 'user' + generate\n        }\n      )\n        .then(function (response) {\n          console.log(response)\n          if (response.data.response === false) {\n            self.alert = response.data.message\n            // Активация всплывающего сообщения\n            document.getElementById('toast').style.opacity = 1\n            // Деактивация лоадера\n            document.getElementById('loader-bg').style.display = 'none'\n            // Уменьшение шага\n            document.getElementById('step').innerText = '2'\n          } else {\n            // Деактивация лоадера\n            document.getElementById('loader-bg').style.display = 'none'\n            self.message = 'Проверьте почту, туда выслано сообщение для активации аккаунта.'\n            document.getElementById('step_two').style.display = 'none'\n            document.getElementById('step_free').style.display = 'block'\n          }\n        })\n        .catch(function (error) {\n          if (error.response.status === 500) {\n            console.log(error)\n            // Деактивация лоадера\n            document.getElementById('loader-bg').style.display = 'none'\n            self.alert = 'Данная организация уже существует!'\n            // Активация всплывающего сообщения\n            document.getElementById('toast').style.opacity = 1\n            document.getElementById('step_two').style.display = 'none'\n            document.getElementById('step_one').style.display = 'block'\n            // Уменьшение шага\n            document.getElementById('step').innerText = '1'\n          }\n        })\n      // END\n    }\n  }\n}\n</script>\n"]},"metadata":{},"sourceType":"module"}