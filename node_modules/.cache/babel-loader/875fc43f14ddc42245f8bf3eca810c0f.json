{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport axios from 'axios';\nimport AlertComponent from '@/components/AlertComponent.vue';\nimport CardFormComponent from '@/components/cards/CardFormComponent.vue';\nimport LoaderComponent from '@/components/LoaderComponent.vue';\nimport ButtonComponent from '@/components/ButtonComponent.vue';\nexport default {\n  data() {\n    return {\n      group: null,\n      group_list: null,\n      user_info: null,\n      user_type: null,\n      users: null,\n      alert: '',\n      organization_id: null,\n      first_name: null,\n      last_name: null,\n      role: null,\n      email: null,\n      student_id: null,\n      students_list: null,\n      first_and_last_name: null,\n      update_user_id: null,\n      update_first_name: null,\n      update_last_name: null,\n      update_role: null,\n      update_email: null,\n      lesson: null,\n      update_lesson: null,\n      lesson_list: null,\n      update_lesson_list: [],\n      lessonUp: ''\n    };\n  },\n\n  props: {\n    is_auth: Number,\n    token: String\n  },\n  components: {\n    CardFormComponent,\n    LoaderComponent,\n    ButtonComponent,\n    AlertComponent\n  },\n  methods: {\n    user: function () {\n      if (this.is_auth >= 0) {\n        axios.get('http://localhost:5000/api/user/user-info?access_token=' + this.token, {\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        }).then(response => {\n          this.user_info = response.data[0].message; // Вызывать методы использующие пользовательские данные ниже\n\n          this.lesson_show(this.user_info.organization_id);\n          this.all_group(this.user_info.organization_id);\n          this.students_for(this.user_info.organization_id);\n          this.user_type = this.user_info.role;\n        }).catch(function (error) {\n          console.log(error);\n        });\n      }\n    },\n\n    all_group(organizationId) {\n      axios.get('http://localhost:5000/api/group/all-group?organization_id=' + organizationId, {\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      }).then(response => {\n        this.group_list = response.data[0].message.list;\n      });\n    },\n\n    lesson_for(lessonId) {\n      if (this.lessonUp.includes('' + lessonId)) {\n        var text = '';\n        var arr = this.lessonUp.split(','); // Вырезка совпадений\n\n        for (var i = 0; i < arr.length; i++) {\n          if (String(arr[i]) !== String(lessonId)) {\n            text += arr[i] + ',';\n          }\n        }\n\n        var s = [];\n        var arrText = text.split(',');\n\n        for (var j = 0; j < arrText.length; j++) {\n          if (arrText[j] === '' || arrText[j] === ' ' || arrText[j] === ',') {// Тут ничего не происходит\n          } else {\n            s.push(arrText[j]);\n          }\n        }\n\n        this.lessonUp = s.join() + ',';\n      } else {\n        this.lessonUp += '' + lessonId + ',';\n      }\n\n      console.log(this.lessonUp);\n    },\n\n    students_for(organizationId) {\n      axios.get('http://localhost:5000/api/group/show-group?group_id=-1' + '&&organization_id=' + organizationId, {\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      }).then(response => {\n        this.students_list = response.data[0].message.list_belongs;\n      });\n    },\n\n    create_user() {\n      // Генерация пароля\n      let generate = '';\n      const possible = 'abcdefghijklmnopqrstuvwxyz';\n\n      for (let i = 0; i < 5; i++) {\n        generate += possible.charAt(Math.floor(Math.random() * possible.length));\n      } // END\n      // Активация лоадера\n\n\n      document.getElementById('loader-bg').style.display = 'block'; // END\n      // Отправка данных\n\n      axios.post('http://localhost:5000/api/user/create-user', {\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n          'Access-Control-Allow-Headers': 'Origin, Content-Type, X-Auth-Token, Authorization, Accept,charset,boundary,Content-Length'\n        },\n        organization_name: this.user_info.organization_id,\n        add_personal: true,\n        role: this.role,\n        first_name: this.first_name,\n        last_name: this.last_name,\n        email: this.email,\n        password: 'user' + generate,\n        group: this.group,\n        student_id: this.student_id,\n        lesson_up: this.lessonUp\n      }).then(response => {\n        this.alert = 'Данные успешно сохранены'; // Активация всплывающего сообщения\n\n        document.getElementById('toast').style.opacity = 1; // Деактивация лоадера\n\n        document.getElementById('loader-bg').style.display = 'none'; // Очистка полей\n\n        this.first_name = '';\n        this.last_name = '';\n        this.email = '';\n        this.role = '';\n      }).catch(function (error) {\n        if (error.response) {\n          // Деактивация лоадера\n          document.getElementById('loader-bg').style.display = 'none';\n          self.alert = 'Ошибка сохранения данных!'; // Активация всплывающего сообщения\n\n          document.getElementById('toast').style.opacity = 1;\n        }\n      }); // END\n    },\n\n    all_show_user(role) {\n      // Активация лоадера\n      document.getElementById('loader-bg').style.display = 'block'; // Запрос на выборку данных юзера по ролям\n\n      axios.get('http://localhost:5000/api/user/all-user?organization_id=' + this.user_info.organization_id + '&&role=' + role, {\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      }).then(response => {\n        this.users = response.data[0].message.users;\n        document.getElementById('personal-info').classList.remove('d-none');\n        document.getElementById('personal-info').classList.add('d-block'); // Деактивация лоадера\n\n        document.getElementById('loader-bg').style.display = 'none';\n      }).catch(function (error) {\n        if (error.error) {\n          // Деактивация лоадера\n          document.getElementById('loader-bg').style.display = 'none';\n          self.alert = 'Ошибка получения данных!'; // Активация всплывающего сообщения\n\n          document.getElementById('toast').style.opacity = 1;\n        }\n      }); // END\n    },\n\n    user_change() {\n      this.update_user_id = this.users[this.first_and_last_name].user_id;\n      this.update_first_name = this.users[this.first_and_last_name].first_name;\n      this.update_last_name = this.users[this.first_and_last_name].last_name;\n      this.update_role = this.users[this.first_and_last_name].role;\n      this.update_email = this.users[this.first_and_last_name].email;\n    },\n\n    update_user() {\n      // Активация лоадера\n      document.getElementById('loader-bg').style.display = 'block'; // Запрос на выборку данных юзера по ролям\n\n      axios.put('http://localhost:5000/api/user/update-user', {\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n          'Access-Control-Allow-Headers': 'Origin, Content-Type, X-Auth-Token, Authorization, Accept,charset,boundary,Content-Length'\n        },\n        user_id: this.update_user_id,\n        first_name: this.update_first_name,\n        last_name: this.update_last_name,\n        role: this.update_role,\n        email: this.update_email\n      }).then(response => {\n        // Деактивация лоадера\n        document.getElementById('loader-bg').style.display = 'none';\n        this.alert = 'Данные обновлены'; // Активация всплывающего сообщения\n\n        document.getElementById('toast').style.opacity = 1;\n      }).catch(function (error) {\n        if (error.error) {\n          // Деактивация лоадера\n          document.getElementById('loader-bg').style.display = 'none';\n          self.alert = 'Ошибка получения данных!'; // Активация всплывающего сообщения\n\n          document.getElementById('toast').style.opacity = 1;\n        }\n      }); // END\n    },\n\n    create_lesson() {\n      // Активация лоадера\n      document.getElementById('loader-bg').style.display = 'block'; // END\n      // Отправка данных\n\n      axios.post('http://localhost:5000/api/lesson/create-lesson', {\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n          'Access-Control-Allow-Headers': 'Origin, Content-Type, X-Auth-Token, Authorization, Accept,charset,boundary,Content-Length'\n        },\n        lesson: this.lesson,\n        organization_id: this.user_info.organization_id\n      }).then(response => {\n        // Деактивация лоадера\n        document.getElementById('loader-bg').style.display = 'none';\n        this.alert = 'Данные успешно сохранены!'; // Активация всплывающего сообщения\n\n        document.getElementById('toast').style.opacity = 1;\n      }).catch(error => {\n        if (error.response) {\n          // Деактивация лоадера\n          document.getElementById('loader-bg').style.display = 'none';\n          this.alert = 'Такой предмет уже добавлен!'; // Активация всплывающего сообщения\n\n          document.getElementById('toast').style.opacity = 1;\n        }\n      }); // END\n\n      this.$router.go(0);\n    },\n\n    lesson_show(id) {\n      // Запрос на выборку данных юзера по ролям\n      axios.get('http://localhost:5000/api/lesson/lesson-all?organization_id=' + id, {\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*'\n        }\n      }).then(response => {\n        this.lesson_list = response.data[0].message.list;\n      }).catch(function (error) {\n        if (error.error) {\n          // Деактивация лоадера\n          document.getElementById('loader-bg').style.display = 'none';\n          self.alert = 'Ошибка получения данных!'; // Активация всплывающего сообщения\n\n          document.getElementById('toast').style.opacity = 1;\n        }\n      }); // END\n    },\n\n    update_lesson_open(id) {\n      const data = this.$refs.lessonUpdate;\n      data[id].classList.remove('d-none');\n      data[id].classList.add('d-block');\n      const text = this.$refs.lessonText;\n      text[id].classList.remove('d-block');\n      text[id].classList.add('d-none');\n      this.$refs.editLesson[id].style.display = 'none';\n      this.$refs.closeEditLesson[id].style.display = 'inline-block';\n    },\n\n    update_lesson_close(id) {\n      this.$refs.closeEditLesson[id].style.display = 'none';\n      this.$refs.editLesson[id].style.display = 'inline-block';\n      const data = this.$refs.lessonUpdate;\n      data[id].classList.remove('d-block');\n      data[id].classList.add('d-none');\n      const text = this.$refs.lessonText;\n      text[id].classList.remove('d-none');\n      text[id].classList.add('d-block');\n    },\n\n    update_lessons(item, id, organizationId) {\n      var data = this.$refs.inputLessonText[item].value; // Запрос на выборку данных юзера по ролям\n\n      axios.put('http://localhost:5000/api/lesson/update-lesson', {\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n          'Access-Control-Allow-Headers': 'Origin, Content-Type, X-Auth-Token, Authorization, Accept,charset,boundary,Content-Length'\n        },\n        id: id,\n        organization_id: organizationId,\n        lesson: data\n      }).then(response => {\n        // Деактивация лоадера\n        document.getElementById('loader-bg').style.display = 'none';\n        this.alert = 'Данные обновлены'; // Активация всплывающего сообщения\n\n        document.getElementById('toast').style.opacity = 1;\n      }).catch(function (error) {\n        if (error.error) {\n          // Деактивация лоадера\n          document.getElementById('loader-bg').style.display = 'none';\n          self.alert = 'Ошибка получения данных!'; // Активация всплывающего сообщения\n\n          document.getElementById('toast').style.opacity = 1;\n        }\n      }); // END\n\n      this.$refs.closeEditLesson[item].style.display = 'none';\n      this.$refs.editLesson[item].style.display = 'inline-block';\n      const element = this.$refs.lessonUpdate;\n      element[item].classList.remove('d-block');\n      element[item].classList.add('d-none');\n      const text = this.$refs.lessonText;\n      text[item].classList.remove('d-none');\n      text[item].classList.add('d-block');\n      location.reload();\n    },\n\n    drop_lesson(id, organizationId) {\n      // Запрос на выборку данных юзера по ролям\n      axios.delete('http://localhost:5000/api/lesson/drop-lesson?id=' + id + '&&organization_id=' + organizationId, {\n        headers: {\n          'Content-Type': 'application/json',\n          'Access-Control-Allow-Origin': '*',\n          'Access-Control-Allow-Headers': 'Origin, Content-Type, X-Auth-Token, Authorization, Accept,charset,boundary,Content-Length'\n        }\n      }).then(response => {\n        // Деактивация лоадера\n        document.getElementById('loader-bg').style.display = 'none';\n        this.alert = 'Данные удалены'; // Активация всплывающего сообщения\n\n        document.getElementById('toast').style.opacity = 1;\n      }).catch(function (error) {\n        if (error.error) {\n          // Деактивация лоадера\n          document.getElementById('loader-bg').style.display = 'none';\n          self.alert = 'Ошибка удаления данных!'; // Активация всплывающего сообщения\n\n          document.getElementById('toast').style.opacity = 1;\n        }\n      });\n      location.reload();\n    }\n\n  },\n\n  mounted() {\n    this.user();\n  }\n\n};","map":{"version":3,"mappings":"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","names":["axios","AlertComponent","CardFormComponent","LoaderComponent","ButtonComponent","data","group","group_list","user_info","user_type","users","alert","organization_id","first_name","last_name","role","email","student_id","students_list","first_and_last_name","update_user_id","update_first_name","update_last_name","update_role","update_email","lesson","update_lesson","lesson_list","update_lesson_list","lessonUp","props","is_auth","Number","token","String","components","methods","user","get","headers","then","response","message","lesson_show","all_group","students_for","catch","error","console","log","organizationId","list","lesson_for","lessonId","includes","text","arr","split","i","length","s","arrText","j","push","join","list_belongs","create_user","generate","possible","charAt","Math","floor","random","document","getElementById","style","display","post","organization_name","add_personal","password","lesson_up","opacity","self","all_show_user","classList","remove","add","user_change","user_id","update_user","put","create_lesson","$router","go","id","update_lesson_open","$refs","lessonUpdate","lessonText","editLesson","closeEditLesson","update_lesson_close","update_lessons","item","inputLessonText","value","element","location","reload","drop_lesson","delete","mounted"],"sourceRoot":"","sources":["/home/vuacheslavmironov/PAD/web/src/views/JournalSettingsView.vue"],"sourcesContent":["<template>\n  <main class=\"container-fluid\">\n    <!-- Компонент загрузки -->\n    <LoaderComponent />\n    <!-- End -->\n    <!-- Сообщение о процессе -->\n    <AlertComponent css_class=\"toast align-items-cente right\" v-bind:mess=\"this.alert\" />\n    <!-- END -->\n    <div class=\"mx-auto\">\n      <div class=\"row\">\n        <!-- Секция левого меню -->\n        <section class=\"col-lg-5\">\n          <CardFormComponent id=\"settings-journal-menu\">\n            <p class=\"text-center\">\n              <strong>Настройки рабочего окружения</strong>\n            </p>\n            <hr>\n            <div class=\"mt-3\">\n              <a class=\"list_items\" role=\"button\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\">\n                  <path d=\"M21.546 11.646 19 9.101V5.5a.5.5 0 0 0-.5-.5h-3.601l-2.546-2.546a.5.5 0 0 0-.707 0L9.101 5H5.5a.5.5 0 0 0-.5.5v3.601l-2.546 2.546a.5.5 0 0 0 0 .707L5 14.899V18.5a.5.5 0 0 0 .5.5h3.601l2.546 2.546a.5.5 0 0 0 .707 0L14.899 19H18.5a.5.5 0 0 0 .5-.5v-3.601l2.546-2.546a.5.5 0 0 0 0-.707zM12 16a4 4 0 1 1 0-8 4 4 0 0 1 0 8z\"></path>\n                </svg>Общие настройки\n              </a>\n            </div>\n            <div class=\"mt-1\">\n              <a\n                class=\"list_items\"\n                data-bs-toggle=\"collapse\"\n                href=\"#staff\"\n                role=\"button\"\n                aria-expanded=\"false\"\n                aria-controls=\"collapseExample\"\n              >\n                <svg xmlns=\"http://www.w3.org/2000/svg\">\n                  <path d=\"M7.5 6.5C7.5 8.981 9.519 11 12 11s4.5-2.019 4.5-4.5S14.481 2 12 2 7.5 4.019 7.5 6.5zM20 21h1v-1c0-3.859-3.141-7-7-7h-4c-3.86 0-7 3.141-7 7v1h17z\"></path>\n                </svg>Персонал\n              </a>\n              <div class=\"collapse\" id=\"staff\">\n                <ul class=\"list-group\">\n                  <li class=\"list-group-item\">\n                    <a href=\"#user_add\">Добавить</a>\n                  </li>\n                  <li class=\"list-group-item\">\n                    <a href=\"#user_update\">Редактировать</a>\n                  </li>\n                </ul>\n              </div>\n            </div>\n            <div class=\"mt-1\">\n              <a\n                class=\"list_items\"\n                data-bs-toggle=\"collapse\"\n                href=\"#lesson\"\n                role=\"button\"\n                aria-expanded=\"false\"\n                aria-controls=\"collapseExample\"\n              >\n                <svg xmlns=\"http://www.w3.org/2000/svg\">\n                  <path d=\"M20 3H4c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2V5c0-1.103-.897-2-2-2zm-1 4v2h-5V7h5zm-5 4h5v2h-5v-2zM4 19V5h7v14H4z\"></path>\n                </svg>Предметы\n              </a>\n              <div class=\"collapse\" id=\"lesson\">\n                <ul class=\"list-group\">\n                  <li class=\"list-group-item\">\n                    <a href=\"#add_lesson\">Добавить</a>\n                  </li>\n                  <li class=\"list-group-item\">\n                    <a href=\"#update_lesson\">Редактировать</a>\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </CardFormComponent>\n        </section>\n        <!-- Секция контента -->\n        <section class=\"col-lg-7 w-50\">\n          <h4>\n            <b>Настройки</b>\n          </h4>\n          <div class=\"mt-5\">\n            <div class=\"mb-5\">\n              <h5>Общие настройки</h5>\n              <br>\n              <div class=\"row\"><!-- Пока ток заглушка --></div>\n            </div>\n            <!-- Настройка персонала -->\n            <div class=\"mt-10\">\n              <div id=\"user_add\"><!-- Якорь на создание юзера --></div>\n              <h5>Регистрация персонала</h5>\n              <br>\n              <div class=\"row\">\n                <div class=\"mb-3 col-6\">\n                  <label class=\"form-label\">\n                    <b>Введите имя</b>\n                  </label>\n                  <input type=\"text\" id=\"user_name\" v-model=\"first_name\" class=\"form-control\">\n                </div>\n                <div class=\"mb-3 col-6\">\n                  <label class=\"form-label\">\n                    <b>Введите фамилию</b>\n                  </label>\n                  <input type=\"text\" id=\"user_surname\" v-model=\"last_name\" class=\"form-control\">\n                </div>\n              </div>\n              <div class=\"mb-4\">\n                <label class=\"form-label\">\n                  <b>Должность</b>\n                </label>\n                <select class=\"form-select\" v-model=\"role\" aria-label=\"Default select example\">\n                  <option v-if=\"this.user_type === 'Директор'\" value=\"Администратор\" selected>Администратор</option>\n                  <option v-if=\"this.user_type === 'Директор' || this.user_type === 'Администратор'\" value=\"Преподаватель\">Преподаватель</option>\n                  <option v-if=\"this.user_type === 'Администратор'\" value=\"Студент\">Студент</option>\n                  <option v-if=\"this.user_type === 'Администратор'\" value=\"Родитель\">Родитель</option>\n                </select>\n              </div>\n              <div v-if=\"this.role === 'Преподаватель'\" class=\"mb-4\">\n                <label class=\"form-label\">\n                  <b>Выберите предметы которые будет вести преподаватель</b>\n                </label>\n                <div class=\"row\">\n                  <div\n                  v-for=\"i in this.lesson_list\"\n                  v-bind:key=\"i\"\n                  class=\"col-4\"\n                  >\n                  <div class=\"form-check\">\n                    <input class=\"form-check-input\" type=\"checkbox\" v-on:click=\"lesson_for(i.id)\" v-bind:id=\"i.id\">\n                    <label class=\"form-check-label\" v-bind:for=\"i.id\">\n                      {{ i.lesson }}\n                    </label>\n                  </div>\n                </div>\n                </div>\n              </div>\n              <div v-if=\"this.role === 'Родитель'\" class=\"mb-4\">\n                <label class=\"form-label\">\n                  <b>Выберите ребёнка</b>\n                </label>\n                <div class=\"row\">\n                  <select\n                    class=\"form-select\"\n                    aria-label=\"Default select example\"\n                    v-model=\"student_id\"\n                  >\n                    <option\n                      v-for=\"i in this.students_list\"\n                      v-bind:key=\"i\"\n                      v-bind:value=\"i.user_id\"\n                    >{{ i.first_name }} {{ i.last_name }}</option>\n                  </select>\n                </div>\n              </div>\n              <div class=\"mb-3\">\n                <label class=\"form-label\">\n                  <b>Электронная почта</b>\n                </label>\n                <input type=\"email\" id=\"user_email\" v-model=\"email\" class=\"form-control\">\n              </div>\n              <div v-if=\"this.user_type === 'Администратор'\" class=\"col-6\">\n                <div v-if=\"this.role && this.role === 'Студент'\" class=\"mb-3\">\n                  <label class=\"form-label\">\n                    <b>Группа</b> <smail>(Не обязательно)</smail>\n                  </label>\n                  <form>\n                    <select class=\"form-select\" v-model=\"group\" aria-label=\"Default select example\">\n                      <option\n                        v-for=\"i in this.group_list\"\n                        v-bind:key=\"i\"\n                        v-bind:value=\"i.id\"\n                      >{{ i.name }}</option>\n                    </select>\n                  </form>\n                </div>\n              </div>\n              <!-- Компонент кнопки -->\n              <ButtonComponent text=\"Сохранить\" v-on:click=\"this.create_user()\" css_class=\"btn mt-2 right\"/>\n              <!-- END -->\n            </div>\n            <div class=\"mt-10\">\n              <div id=\"user_update\"><!-- Якорь на обновление юзера --></div>\n              <h5>Редактирование персонала</h5>\n              <br>\n              <p>Выберите должность</p>\n              <div v-if=\"this.user_type === 'Директор'\" class=\"form-check\">\n                <input\n                  class=\"form-check-input\"\n                  v-on:click=\"all_show_user('Администратор')\"\n                  type=\"radio\"\n                  name=\"flexRadioDefault\"\n                  id=\"admin\"\n                >\n                <label class=\"form-check-label\" for=\"admin\">\n                  Администратор\n                </label>\n              </div>\n              <div v-if=\"this.user_type === 'Директор' || this.user_type === 'Администратор'\" class=\"form-check\">\n                <input\n                  class=\"form-check-input\"\n                  v-on:click=\"all_show_user('Преподаватель')\"\n                  type=\"radio\"\n                  name=\"flexRadioDefault\"\n                  id=\"teacher\"\n                >\n                <label class=\"form-check-label\" for=\"teacher\">\n                  Преподаватель\n                </label>\n              </div>\n              <div v-if=\"this.user_type === 'Администратор'\" class=\"form-check\">\n                <input\n                  class=\"form-check-input\"\n                  v-on:click=\"all_show_user('Студент')\"\n                  type=\"radio\"\n                  name=\"flexRadioDefault\"\n                  id=\"teacher\"\n                >\n                <label class=\"form-check-label\" for=\"teacher\">\n                  Студент\n                </label>\n              </div>\n              <div v-if=\"this.user_type === 'Администратор'\" class=\"form-check\">\n                <input\n                  class=\"form-check-input\"\n                  v-on:click=\"all_show_user('Родитель')\"\n                  type=\"radio\"\n                  name=\"flexRadioDefault\"\n                  id=\"teacher\"\n                >\n                <label class=\"form-check-label\" for=\"teacher\">\n                  Родитель\n                </label>\n              </div>\n              <section id=\"personal-info\" class=\"d-none\">\n                <div class=\"mb-3\">\n                  <label class=\"form-label\">\n                    <b id=\"select-text-personal\"></b>\n                  </label>\n                  <select\n                    v-on:change=\"user_change()\"\n                    class=\"form-select\"\n                    v-model=\"first_and_last_name\"\n                    aria-label=\"Default select example\"\n                  >\n                    <option\n                      v-for=\"(user, index) in users\"\n                      v-bind:key=\"user\"\n                      v-bind:value=\"index\"\n                    >\n                      {{ user.last_name }} {{ user.first_name }}\n                    </option>\n                  </select>\n                </div>\n                <div class=\"row\">\n                  <div class=\"mb-3 col-6\">\n                    <label class=\"form-label\">\n                      <b>Введите имя</b>\n                    </label>\n                    <input type=\"text\" id=\"user_name\" v-model=\"update_first_name\" class=\"form-control\">\n                  </div>\n                  <div class=\"mb-3 col-6\">\n                    <label class=\"form-label\">\n                      <b>Ваша фамилия</b>\n                    </label>\n                    <input type=\"text\" id=\"user_surname\" v-model=\"update_last_name\" class=\"form-control\">\n                  </div>\n                </div>\n                <input hidden v-model=\"update_user_id\">\n                <div class=\"mb-3\">\n                  <label class=\"form-label\">\n                    <b>Должность</b>\n                  </label>\n                  <select class=\"form-select\" v-model=\"update_role\" aria-label=\"Default select example\">\n                    <option v-if=\"this.user_type === 'Директор'\" value=\"Администратор\" selected>Администратор</option>\n                    <option v-if=\"this.user_type === 'Директор' || this.user_type === 'Администратор'\" value=\"Преподаватель\">Преподаватель</option>\n                    <option v-if=\"this.user_type === 'Администратор'\" value=\"Студент\">Студент</option>\n                    <option v-if=\"this.user_type === 'Администратор'\" value=\"Родитель\">Родитель</option>\n                  </select>\n                </div>\n                <div class=\"mb-3\">\n                  <label class=\"form-label\">\n                    <b>Электронная почта</b>\n                  </label>\n                  <input type=\"email\" id=\"user_email\" v-model=\"update_email\" class=\"form-control\">\n                </div>\n                <div v-if=\"this.update_role === 'Преподаватель'\" class=\"mb-4\">\n                <label class=\"form-label\">\n                  <b>Выберите предметы которые будет вести преподаватель</b>\n                </label>\n                <div class=\"row\">\n                  <div\n                    v-for=\"i in this.lesson_list\"\n                    v-bind:key=\"i\"\n                    class=\"col-4\"\n                  >\n                  <div class=\"form-check\">\n                    <input class=\"form-check-input\" type=\"checkbox\" v-on:click=\"lesson_for(i.id)\" v-bind:id=\"i.id\">\n                    <label class=\"form-check-label\" v-bind:for=\"i.id\">\n                      {{ i.lesson }}\n                    </label>\n                  </div>\n                  </div>\n                </div>\n              </div>\n                <!-- Компонент кнопки -->\n                <ButtonComponent text=\"Обновить данные\" v-on:click=\"this.update_user()\" css_class=\"btn mt-2 right\"/>\n                <!-- END -->\n              </section>\n            </div>\n            <!-- Настройка предметов -->\n            <div class=\"mt-10\">\n              <div id=\"add_lesson\"><!-- Якорь на добавление предмета --></div>\n              <h5>Добавить предмет</h5>\n              <br>\n              <div class=\"mb-3\">\n                <label class=\"form-label\">\n                  <b>Наименование предмета</b>\n                </label>\n                <input type=\"text\" v-model=\"lesson\" class=\"form-control\">\n              </div>\n              <!-- Компонент кнопки -->\n              <ButtonComponent text=\"Добавить\" v-on:click=\"this.create_lesson()\" css_class=\"btn mt-2 right\"/>\n              <!-- END -->\n            </div>\n            <div class=\"mt-10\">\n              <div id=\"update_lesson\"><!-- Якорь на редактирование предмета --></div>\n              <h5>Редактировать предметы</h5>\n              <br>\n              <table class=\"table\">\n                <thead>\n                  <tr>\n                    <th scope=\"col\">Наименование</th>\n                    <th scope=\"col\">Действие</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr v-for=\"(i, idx) in this.lesson_list\" v-bind:key=\"i\">\n                    <td>\n                      <p ref=\"lessonText\" class=\"d-block\">{{i.lesson}}</p>\n                      <div ref=\"lessonUpdate\"  class=\"d-none\">\n                        <div class=\"input-group mb-1\">\n                          <input\n                            type=\"text\"\n                            class=\"form-control\"\n                            placeholder=\"Recipient's username\"\n                            aria-label=\"Recipient's username\"\n                            ref=\"inputLessonText\"\n                            v-bind:aria-describedby=\"idx\"\n                            v-bind:value=\"i.lesson\"\n                          >\n                          <button v-on:click=\"this.update_lessons(idx, i.id, this.user_info.organization_id)\" class=\"btn\" type=\"button\" v-bind:id=\"idx\">Ок</button>\n                        </div>\n                      </div>\n                    </td>\n                    <td>\n                      <span ref=\"editLesson\" class=\"btn p-1 m-1 bg-blue\" v-on:click=\"this.update_lesson_open(idx)\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" style=\"fill: rgba(0, 0, 0, 1);\">\n                          <path d=\"m7 17.013 4.413-.015 9.632-9.54c.378-.378.586-.88.586-1.414s-.208-1.036-.586-1.414l-1.586-1.586c-.756-.756-2.075-.752-2.825-.003L7 12.583v4.43zM18.045 4.458l1.589 1.583-1.597 1.582-1.586-1.585 1.594-1.58zM9 13.417l6.03-5.973 1.586 1.586-6.029 5.971L9 15.006v-1.589z\"></path><path d=\"M5 21h14c1.103 0 2-.897 2-2v-8.668l-2 2V19H8.158c-.026 0-.053.01-.079.01-.033 0-.066-.009-.1-.01H5V5h6.847l2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2z\"></path>\n                        </svg>\n                      </span>\n                      <span ref=\"closeEditLesson\" style=\"display: none;\" class=\"btn p-1 m-1\" v-on:click=\"this.update_lesson_close(idx)\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" style=\"fill: rgba(0, 0, 0, 1);\">\n                          <path d=\"M9.172 16.242 12 13.414l2.828 2.828 1.414-1.414L13.414 12l2.828-2.828-1.414-1.414L12 10.586 9.172 7.758 7.758 9.172 10.586 12l-2.828 2.828z\"></path>\n                          <path d=\"M12 22c5.514 0 10-4.486 10-10S17.514 2 12 2 2 6.486 2 12s4.486 10 10 10zm0-18c4.411 0 8 3.589 8 8s-3.589 8-8 8-8-3.589-8-8 3.589-8 8-8z\"></path>\n                        </svg>\n                      </span>\n                      <span class=\"btn p-1 m-1\" v-on:click=\"this.drop_lesson(i.id, this.user_info.organization_id)\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" style=\"fill: rgba(0, 0, 0, 1);\">\n                          <path d=\"M6 7H5v13a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7H6zm4 12H8v-9h2v9zm6 0h-2v-9h2v9zm.618-15L15 2H9L7.382 4H3v2h18V4z\"></path>\n                        </svg>\n                      </span>\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </section>\n      </div>\n    </div>\n    {{this.lessonUp}}\n  </main>\n</template>\n\n<script>\nimport axios from 'axios'\nimport AlertComponent from '@/components/AlertComponent.vue'\nimport CardFormComponent from '@/components/cards/CardFormComponent.vue'\nimport LoaderComponent from '@/components/LoaderComponent.vue'\nimport ButtonComponent from '@/components/ButtonComponent.vue'\n\nexport default {\n  data () {\n    return {\n      group: null,\n      group_list: null,\n      user_info: null,\n      user_type: null,\n      users: null,\n      alert: '',\n      organization_id: null,\n      first_name: null,\n      last_name: null,\n      role: null,\n      email: null,\n      student_id: null,\n      students_list: null,\n      first_and_last_name: null,\n      update_user_id: null,\n      update_first_name: null,\n      update_last_name: null,\n      update_role: null,\n      update_email: null,\n      lesson: null,\n      update_lesson: null,\n      lesson_list: null,\n      update_lesson_list: [],\n      lessonUp: ''\n    }\n  },\n  props: {\n    is_auth: Number,\n    token: String\n  },\n  components: {\n    CardFormComponent,\n    LoaderComponent,\n    ButtonComponent,\n    AlertComponent\n  },\n  methods: {\n    user: function () {\n      if (this.is_auth >= 0) {\n        axios.get('http://localhost:5000/api/user/user-info?access_token=' + this.token,\n          {\n            headers: {\n              'Content-Type': 'application/json'\n            }\n          }\n        )\n          .then((response) => {\n            this.user_info = response.data[0].message\n            // Вызывать методы использующие пользовательские данные ниже\n            this.lesson_show(this.user_info.organization_id)\n            this.all_group(this.user_info.organization_id)\n            this.students_for(this.user_info.organization_id)\n            this.user_type = this.user_info.role\n          })\n          .catch(function (error) {\n            console.log(error)\n          })\n      }\n    },\n    all_group (organizationId) {\n      axios.get('http://localhost:5000/api/group/all-group?organization_id=' + organizationId,\n        {\n          headers: {\n            'Content-Type': 'application/json',\n            'Access-Control-Allow-Origin': '*'\n          }\n        })\n        .then((response) => {\n          this.group_list = response.data[0].message.list\n        })\n    },\n    lesson_for (lessonId) {\n      if (this.lessonUp.includes('' + lessonId)) {\n        var text = ''\n        var arr = this.lessonUp.split(',')\n        // Вырезка совпадений\n        for (var i = 0; i < arr.length; i++) {\n          if (String(arr[i]) !== String(lessonId)) {\n            text += arr[i] + ','\n          }\n        }\n        var s = []\n        var arrText = text.split(',')\n        for (var j = 0; j < arrText.length; j++) {\n          if (arrText[j] === '' || arrText[j] === ' ' || arrText[j] === ',') {\n            // Тут ничего не происходит\n          } else {\n            s.push(arrText[j])\n          }\n        }\n        this.lessonUp = s.join() + ','\n      } else {\n        this.lessonUp += '' + lessonId + ','\n      }\n      console.log(this.lessonUp)\n    },\n    students_for (organizationId) {\n      axios.get('http://localhost:5000/api/group/show-group?group_id=-1' + '&&organization_id=' + organizationId,\n        {\n          headers: {\n            'Content-Type': 'application/json',\n            'Access-Control-Allow-Origin': '*'\n          }\n        })\n        .then((response) => {\n          this.students_list = response.data[0].message.list_belongs\n        })\n    },\n    create_user () {\n      // Генерация пароля\n      let generate = ''\n      const possible = 'abcdefghijklmnopqrstuvwxyz'\n      for (let i = 0; i < 5; i++) {\n        generate += possible.charAt(Math.floor(Math.random() * possible.length))\n      }\n      // END\n      // Активация лоадера\n      document.getElementById('loader-bg').style.display = 'block'\n      // END\n      // Отправка данных\n      axios.post('http://localhost:5000/api/user/create-user',\n        {\n          headers: {\n            'Content-Type': 'application/json',\n            'Access-Control-Allow-Origin': '*',\n            'Access-Control-Allow-Headers': 'Origin, Content-Type, X-Auth-Token, Authorization, Accept,charset,boundary,Content-Length'\n          },\n          organization_name: this.user_info.organization_id,\n          add_personal: true,\n          role: this.role,\n          first_name: this.first_name,\n          last_name: this.last_name,\n          email: this.email,\n          password: 'user' + generate,\n          group: this.group,\n          student_id: this.student_id,\n          lesson_up: this.lessonUp\n        })\n        .then((response) => {\n          this.alert = 'Данные успешно сохранены'\n          // Активация всплывающего сообщения\n          document.getElementById('toast').style.opacity = 1\n          // Деактивация лоадера\n          document.getElementById('loader-bg').style.display = 'none'\n          // Очистка полей\n          this.first_name = ''\n          this.last_name = ''\n          this.email = ''\n          this.role = ''\n        })\n        .catch(function (error) {\n          if (error.response) {\n            // Деактивация лоадера\n            document.getElementById('loader-bg').style.display = 'none'\n            self.alert = 'Ошибка сохранения данных!'\n            // Активация всплывающего сообщения\n            document.getElementById('toast').style.opacity = 1\n          }\n        })\n      // END\n    },\n    all_show_user (role) {\n      // Активация лоадера\n      document.getElementById('loader-bg').style.display = 'block'\n      // Запрос на выборку данных юзера по ролям\n      axios.get('http://localhost:5000/api/user/all-user?organization_id=' + this.user_info.organization_id + '&&role=' + role,\n        {\n          headers: {\n            'Content-Type': 'application/json',\n            'Access-Control-Allow-Origin': '*'\n          }\n        }\n      )\n        .then((response) => {\n          this.users = response.data[0].message.users\n          document.getElementById('personal-info').classList.remove('d-none')\n          document.getElementById('personal-info').classList.add('d-block')\n          // Деактивация лоадера\n          document.getElementById('loader-bg').style.display = 'none'\n        })\n        .catch(function (error) {\n          if (error.error) {\n            // Деактивация лоадера\n            document.getElementById('loader-bg').style.display = 'none'\n            self.alert = 'Ошибка получения данных!'\n            // Активация всплывающего сообщения\n            document.getElementById('toast').style.opacity = 1\n          }\n        })\n      // END\n    },\n    user_change () {\n      this.update_user_id = this.users[this.first_and_last_name].user_id\n      this.update_first_name = this.users[this.first_and_last_name].first_name\n      this.update_last_name = this.users[this.first_and_last_name].last_name\n      this.update_role = this.users[this.first_and_last_name].role\n      this.update_email = this.users[this.first_and_last_name].email\n    },\n    update_user () {\n      // Активация лоадера\n      document.getElementById('loader-bg').style.display = 'block'\n      // Запрос на выборку данных юзера по ролям\n      axios.put('http://localhost:5000/api/user/update-user',\n        {\n          headers: {\n            'Content-Type': 'application/json',\n            'Access-Control-Allow-Origin': '*',\n            'Access-Control-Allow-Headers': 'Origin, Content-Type, X-Auth-Token, Authorization, Accept,charset,boundary,Content-Length'\n          },\n          user_id: this.update_user_id,\n          first_name: this.update_first_name,\n          last_name: this.update_last_name,\n          role: this.update_role,\n          email: this.update_email\n        }\n      )\n        .then((response) => {\n          // Деактивация лоадера\n          document.getElementById('loader-bg').style.display = 'none'\n          this.alert = 'Данные обновлены'\n          // Активация всплывающего сообщения\n          document.getElementById('toast').style.opacity = 1\n        })\n        .catch(function (error) {\n          if (error.error) {\n            // Деактивация лоадера\n            document.getElementById('loader-bg').style.display = 'none'\n            self.alert = 'Ошибка получения данных!'\n            // Активация всплывающего сообщения\n            document.getElementById('toast').style.opacity = 1\n          }\n        })\n      // END\n    },\n    create_lesson () {\n      // Активация лоадера\n      document.getElementById('loader-bg').style.display = 'block'\n      // END\n      // Отправка данных\n      axios.post('http://localhost:5000/api/lesson/create-lesson',\n        {\n          headers: {\n            'Content-Type': 'application/json',\n            'Access-Control-Allow-Origin': '*',\n            'Access-Control-Allow-Headers': 'Origin, Content-Type, X-Auth-Token, Authorization, Accept,charset,boundary,Content-Length'\n          },\n          lesson: this.lesson,\n          organization_id: this.user_info.organization_id\n        }\n      )\n        .then((response) => {\n          // Деактивация лоадера\n          document.getElementById('loader-bg').style.display = 'none'\n          this.alert = 'Данные успешно сохранены!'\n          // Активация всплывающего сообщения\n          document.getElementById('toast').style.opacity = 1\n        })\n        .catch((error) => {\n          if (error.response) {\n            // Деактивация лоадера\n            document.getElementById('loader-bg').style.display = 'none'\n            this.alert = 'Такой предмет уже добавлен!'\n            // Активация всплывающего сообщения\n            document.getElementById('toast').style.opacity = 1\n          }\n        })\n      // END\n      this.$router.go(0)\n    },\n    lesson_show (id) {\n      // Запрос на выборку данных юзера по ролям\n      axios.get('http://localhost:5000/api/lesson/lesson-all?organization_id=' + id,\n        {\n          headers: {\n            'Content-Type': 'application/json',\n            'Access-Control-Allow-Origin': '*'\n          }\n        }\n      )\n        .then((response) => {\n          this.lesson_list = response.data[0].message.list\n        })\n        .catch(function (error) {\n          if (error.error) {\n            // Деактивация лоадера\n            document.getElementById('loader-bg').style.display = 'none'\n            self.alert = 'Ошибка получения данных!'\n            // Активация всплывающего сообщения\n            document.getElementById('toast').style.opacity = 1\n          }\n        })\n      // END\n    },\n    update_lesson_open (id) {\n      const data = this.$refs.lessonUpdate\n      data[id].classList.remove('d-none')\n      data[id].classList.add('d-block')\n\n      const text = this.$refs.lessonText\n      text[id].classList.remove('d-block')\n      text[id].classList.add('d-none')\n\n      this.$refs.editLesson[id].style.display = 'none'\n      this.$refs.closeEditLesson[id].style.display = 'inline-block'\n    },\n    update_lesson_close (id) {\n      this.$refs.closeEditLesson[id].style.display = 'none'\n      this.$refs.editLesson[id].style.display = 'inline-block'\n\n      const data = this.$refs.lessonUpdate\n      data[id].classList.remove('d-block')\n      data[id].classList.add('d-none')\n\n      const text = this.$refs.lessonText\n      text[id].classList.remove('d-none')\n      text[id].classList.add('d-block')\n    },\n    update_lessons (item, id, organizationId) {\n      var data = this.$refs.inputLessonText[item].value\n      // Запрос на выборку данных юзера по ролям\n      axios.put('http://localhost:5000/api/lesson/update-lesson',\n        {\n          headers: {\n            'Content-Type': 'application/json',\n            'Access-Control-Allow-Origin': '*',\n            'Access-Control-Allow-Headers': 'Origin, Content-Type, X-Auth-Token, Authorization, Accept,charset,boundary,Content-Length'\n          },\n          id: id,\n          organization_id: organizationId,\n          lesson: data\n        }\n      )\n        .then((response) => {\n          // Деактивация лоадера\n          document.getElementById('loader-bg').style.display = 'none'\n          this.alert = 'Данные обновлены'\n          // Активация всплывающего сообщения\n          document.getElementById('toast').style.opacity = 1\n        })\n        .catch(function (error) {\n          if (error.error) {\n            // Деактивация лоадера\n            document.getElementById('loader-bg').style.display = 'none'\n            self.alert = 'Ошибка получения данных!'\n            // Активация всплывающего сообщения\n            document.getElementById('toast').style.opacity = 1\n          }\n        })\n      // END\n      this.$refs.closeEditLesson[item].style.display = 'none'\n      this.$refs.editLesson[item].style.display = 'inline-block'\n      const element = this.$refs.lessonUpdate\n      element[item].classList.remove('d-block')\n      element[item].classList.add('d-none')\n\n      const text = this.$refs.lessonText\n      text[item].classList.remove('d-none')\n      text[item].classList.add('d-block')\n      location.reload()\n    },\n    drop_lesson (id, organizationId) {\n      // Запрос на выборку данных юзера по ролям\n      axios.delete('http://localhost:5000/api/lesson/drop-lesson?id=' + (id) + '&&organization_id=' + organizationId,\n        {\n          headers: {\n            'Content-Type': 'application/json',\n            'Access-Control-Allow-Origin': '*',\n            'Access-Control-Allow-Headers': 'Origin, Content-Type, X-Auth-Token, Authorization, Accept,charset,boundary,Content-Length'\n          }\n        }\n      )\n        .then((response) => {\n          // Деактивация лоадера\n          document.getElementById('loader-bg').style.display = 'none'\n          this.alert = 'Данные удалены'\n          // Активация всплывающего сообщения\n          document.getElementById('toast').style.opacity = 1\n        })\n        .catch(function (error) {\n          if (error.error) {\n            // Деактивация лоадера\n            document.getElementById('loader-bg').style.display = 'none'\n            self.alert = 'Ошибка удаления данных!'\n            // Активация всплывающего сообщения\n            document.getElementById('toast').style.opacity = 1\n          }\n        })\n      location.reload()\n    }\n  },\n  mounted () {\n    this.user()\n  }\n}\n</script>\n"]},"metadata":{},"sourceType":"module"}